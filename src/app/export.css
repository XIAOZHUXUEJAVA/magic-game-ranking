/* 导出时的样式优化 */

/* 确保导出时图片正确显示 */
.exporting img {
  /* 强制显示图片，即使还在加载中 */
  opacity: 1 !important;
  visibility: visible !important;

  /* 确保图片尺寸正确 */
  max-width: none !important;
  max-height: none !important;

  /* 防止图片变形 */
  object-fit: cover !important;

  /* 确保跨域设置 */
  crossorigin: anonymous;
}

/* 确保所有图片在导出时正确显示 */
.exporting img,
.exporting [data-nimg] {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* 导出时隐藏不需要的元素 */
.exporting .hidden-on-export {
  display: none !important;
}

/* 导出时的容器样式 */
.exporting {
  /* 确保容器有固定尺寸 */
  width: auto !important;
  height: auto !important;

  /* 移除可能影响导出的变换 */
  transform: none !important;

  /* 确保背景色 */
  background-color: #000000 !important;
}

/* 确保游戏卡片在导出时正确显示 */
.exporting .game-card {
  /* 移除悬停效果 */
  transform: none !important;
  transition: none !important;

  /* 确保卡片可见 */
  opacity: 1 !important;
  visibility: visible !important;
}

/* 确保文字在导出时清晰 */
.exporting * {
  /* 禁用文字选择，避免导出时出现选择状态 */
  user-select: none !important;

  /* 确保文字渲染质量 */
  text-rendering: optimizeLegibility !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
}

/* 导出时的动画处理 */
.exporting * {
  /* 暂停所有动画 */
  animation-play-state: paused !important;

  /* 移除过渡效果 */
  transition: none !important;
}

/* 确保占位符图片正确显示 */
.exporting img[src*="placeholder"] {
  opacity: 0.7 !important;
  filter: grayscale(0.3) !important;
}

/* 导出进度提示 */
.export-loading {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 9999;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 20px;
  border-radius: 8px;
  text-align: center;
}

.export-loading .spinner {
  width: 40px;
  height: 40px;
  border: 4px solid #333;
  border-top: 4px solid #fff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 10px;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
